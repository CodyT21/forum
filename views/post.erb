<h2><%= @post[:title] %></h2>
<p><%= @post[:content] %></p>
<h3>Comments</h3>
<% unless @post[:comments].empty? %>
  <table style="border-spacing: 30px;">
    <thead>
      <tr>
        <th>Comment</th>
        <th>Author</th>
        <th>Created On</th>
        <th>Last Updated</th>
      </tr>
    </thead>
    <tbody>
      <% @post[:comments].each do |comment| %>
        <tr>
          <td><%= comment[:content] %></td>
          <td><%= comment[:author] %></td>
          <td><%= comment[:date] %></td>
          <td>
            <% if comment[:update_date] %>
              <%= comment[:update_date] %>
            <% else %>
              <%= comment[:date] %>
            <% end %>
          </td>
          <% if current_user_id == comment[:author_id] %>
            <td><a href="/posts/<%= @post[:id] %>/comments/<%= comment[:id] %>/edit">Edit</a></td>
            <td>
              <form action="/posts/<%= @post[:id] %>/comments/<%= comment[:id] %>/delete" method="post">
                <input type="submit" value="Delete">
              </form>
            </td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>No comments to display.</p>
<% end %>

<h3>Add a Comment</h2>
<form action="/posts/<%= @post[:id] %>/comments" method="post">
  <label>Enter new comment below:</label></br>
  <textarea name="comment" rows="5" cols="50"></textarea>
  <input type="hidden" name="user_id" value="<%= current_user_id %>">
  <input type="submit" value="Submit">
</form>

<a href="/posts">Return to Posts</a>